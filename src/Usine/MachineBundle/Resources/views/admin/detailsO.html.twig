{% extends '::base.html.twig' %}
{% block body %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script>
    <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script src="https://www.amcharts.com/lib/3/serial.js"></script>
    <script src="https://www.amcharts.com/lib/3/pie.js"></script>
    <script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
    <link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
    <script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
    <script src="../assets/pages/scripts/table-datatables-editable.min.js" type="text/javascript"></script>






    <div class="row">
        <div class="col-md-12">

            <div class="portlet light ">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-pie-chart  font-green-haze"></i>
                        <span class="caption-subject bold uppercase font-green-haze"><?php echo $_POST["name"]; ?> </span>
                        <span class="caption-helper">Details</span>
                    </div>



                </div>
                <div class="portlet-body">

                    <div class="row">
                        <div class="col-xs-12 col-md-12 col-lg-8">

                            <div class="info">
                                <div class="portlet light portlet-fit ">
                                    <div class="portlet-title" style="background-color :#bfcad1 ;">

                                        Block map
                                    </div>
                                    <div class="portlet-body util-btn-margin-bottom-5">
                                        <div class="clearfix">






                                            <div class="Piediv" align="center" >
                                                <canvas id="myChart"></canvas>

                                            </div>






                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>


                        <div class="col-xs-12 col-md-12 col-lg-4">

                            <div class="info" id="p1">
                                <div class="portlet light portlet-fit ">
                                    <div class="portlet-title" style="background-color :#bfcad1 ;">

                                        Block information
                                    </div>
                                    <div class="portlet-body util-btn-margin-bottom-5">
                                        <div class="clearfix">
                                            <div class="col-xs-4">


                                                <div class="pourcentage">
                                                    <span class="glyphicon glyphicon-triangle-top green" style="font-size: 10px;margin-right:0;vertical-align: middle;padding-bottom: 15px;" aria-hidden="true"></span> <strong style="font-size: 30px;font-weight: 600;">15</strong>%<br>Production
                                                </div>
                                            </div>

                                            <div class="col-xs-4 ">
                                                <div class="pourcentage">
                                                    <span class="glyphicon glyphicon-triangle-bottom red" style="font-size: 10px;margin-right:0;vertical-align: middle;padding-bottom: 15px;" aria-hidden="true"></span> <strong style="font-size: 30px;font-weight: 600;">20</strong>%<br>Consommation
                                                </div>
                                            </div>

                                            <div class="col-xs-4 ">
                                                <div class="pourcentage">
                                                    <span class="glyphicon glyphicon-triangle-bottom red" style="font-size: 10px;margin-right:0;vertical-align: middle;padding-bottom: 15px;" aria-hidden="true"></span> <strong style="font-size: 30px;font-weight: 600;">15</strong>%<br>Déchet
                                                </div>
                                            </div>

                                            <div id="chartdiv"></div>

                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="info" id="p2">
                                <div class="portlet light portlet-fit ">
                                    <div class="portlet-title" style="background-color :#bfcad1 ;">

                                        Block information Assemblage1
                                    </div>
                                    <div class="portlet-body util-btn-margin-bottom-5">

                                        Assemblage1<br><br><br>

                                        <iframe src="https://3dwarehouse.sketchup.com/embed.html?mid=f0a94f01cbea401496853d3b5aa459b6&width=300&height=326" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" width="300" height="326" allowfullscreen></iframe>


                                    </div>
                                </div>
                            </div>



                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet box">
                <div class="portlet-title" style="background-color:#32c5d2">
                    <div class="caption">
                        <i class="fa fa-globe"></i>Row & Column Reordering </div>
                    <div class="tools"> </div>
                </div>
                <div class="portlet-body">
                    <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="sample_3" cellspacing="0" width="100%">
                        <thead>
                        <tr>
                            <th class="all">First name</th>
                            <th class="min-phone-l">Last name</th>
                            <th class="min-tablet">Position</th>
                            <th class="none">Office</th>
                            <th class="none">Age</th>
                            <th class="none">Start date</th>
                            <th class="desktop">Salary</th>
                            <th class="none">Extn.</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Tiger</td>
                            <td>Nixon</td>
                            <td>System Architect</td>
                            <td>Edinburgh</td>
                            <td>61</td>
                            <td>2011/04/25</td>
                            <td>$320,800</td>
                            <td>5421</td>
                        </tr>
                        <tr>
                            <td>Garrett</td>
                            <td>Winters</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>63</td>
                            <td>2011/07/25</td>
                            <td>$170,750</td>
                            <td>8422</td>
                        </tr>
                        <tr>
                            <td>Ashton</td>
                            <td>Cox</td>
                            <td>Junior Technical Author</td>
                            <td>San Francisco</td>
                            <td>66</td>
                            <td>2009/01/12</td>
                            <td>$86,000</td>
                            <td>1562</td>
                        </tr>
                        <tr>
                            <td>Cedric</td>
                            <td>Kelly</td>
                            <td>Senior Javascript Developer</td>
                            <td>Edinburgh</td>
                            <td>22</td>
                            <td>2012/03/29</td>
                            <td>$433,060</td>
                            <td>6224</td>
                        </tr>
                        <tr>
                            <td>Airi</td>
                            <td>Satou</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>33</td>
                            <td>2008/11/28</td>
                            <td>$162,700</td>
                            <td>5407</td>
                        </tr>
                        <tr>
                            <td>Brielle</td>
                            <td>Williamson</td>
                            <td>Integration Specialist</td>
                            <td>New York</td>
                            <td>61</td>
                            <td>2012/12/02</td>
                            <td>$372,000</td>
                            <td>4804</td>
                        </tr>
                        <tr>
                            <td>Herrod</td>
                            <td>Chandler</td>
                            <td>Sales Assistant</td>
                            <td>San Francisco</td>
                            <td>59</td>
                            <td>2012/08/06</td>
                            <td>$137,500</td>
                            <td>9608</td>
                        </tr>
                        <tr>
                            <td>Rhona</td>
                            <td>Davidson</td>
                            <td>Integration Specialist</td>
                            <td>Tokyo</td>
                            <td>55</td>
                            <td>2010/10/14</td>
                            <td>$327,900</td>
                            <td>6200</td>
                        </tr>
                        <tr>
                            <td>Colleen</td>
                            <td>Hurst</td>
                            <td>Javascript Developer</td>
                            <td>San Francisco</td>
                            <td>39</td>
                            <td>2009/09/15</td>
                            <td>$205,500</td>
                            <td>2360</td>
                        </tr>
                        <tr>
                            <td>Sonya</td>
                            <td>Frost</td>
                            <td>Software Engineer</td>
                            <td>Edinburgh</td>
                            <td>23</td>
                            <td>2008/12/13</td>
                            <td>$103,600</td>
                            <td>1667</td>
                        </tr>
                        <tr>
                            <td>Jena</td>
                            <td>Gaines</td>
                            <td>Office Manager</td>
                            <td>London</td>
                            <td>30</td>
                            <td>2008/12/19</td>
                            <td>$90,560</td>
                            <td>3814</td>
                        </tr>
                        <tr>
                            <td>Quinn</td>
                            <td>Flynn</td>
                            <td>Support Lead</td>
                            <td>Edinburgh</td>
                            <td>22</td>
                            <td>2013/03/03</td>
                            <td>$342,000</td>
                            <td>9497</td>
                        </tr>
                        <tr>
                            <td>Charde</td>
                            <td>Marshall</td>
                            <td>Regional Director</td>
                            <td>San Francisco</td>
                            <td>36</td>
                            <td>2008/10/16</td>
                            <td>$470,600</td>
                            <td>6741</td>
                        </tr>
                        <tr>
                            <td>Haley</td>
                            <td>Kennedy</td>
                            <td>Senior Marketing Designer</td>
                            <td>London</td>
                            <td>43</td>
                            <td>2012/12/18</td>
                            <td>$313,500</td>
                            <td>3597</td>
                        </tr>
                        <tr>
                            <td>Tatyana</td>
                            <td>Fitzpatrick</td>
                            <td>Regional Director</td>
                            <td>London</td>
                            <td>19</td>
                            <td>2010/03/17</td>
                            <td>$385,750</td>
                            <td>1965</td>
                        </tr>
                        <tr>
                            <td>Michael</td>
                            <td>Silva</td>
                            <td>Marketing Designer</td>
                            <td>London</td>
                            <td>66</td>
                            <td>2012/11/27</td>
                            <td>$198,500</td>
                            <td>1581</td>
                        </tr>
                        <tr>
                            <td>Paul</td>
                            <td>Byrd</td>
                            <td>Chief Financial Officer (CFO)</td>
                            <td>New York</td>
                            <td>64</td>
                            <td>2010/06/09</td>
                            <td>$725,000</td>
                            <td>3059</td>
                        </tr>
                        <tr>
                            <td>Gloria</td>
                            <td>Little</td>
                            <td>Systems Administrator</td>
                            <td>New York</td>
                            <td>59</td>
                            <td>2009/04/10</td>
                            <td>$237,500</td>
                            <td>1721</td>
                        </tr>
                        <tr>
                            <td>Bradley</td>
                            <td>Greer</td>
                            <td>Software Engineer</td>
                            <td>London</td>
                            <td>41</td>
                            <td>2012/10/13</td>
                            <td>$132,000</td>
                            <td>2558</td>
                        </tr>
                        <tr>
                            <td>Dai</td>
                            <td>Rios</td>
                            <td>Personnel Lead</td>
                            <td>Edinburgh</td>
                            <td>35</td>
                            <td>2012/09/26</td>
                            <td>$217,500</td>
                            <td>2290</td>
                        </tr>
                        <tr>
                            <td>Jenette</td>
                            <td>Caldwell</td>
                            <td>Development Lead</td>
                            <td>New York</td>
                            <td>30</td>
                            <td>2011/09/03</td>
                            <td>$345,000</td>
                            <td>1937</td>
                        </tr>
                        <tr>
                            <td>Yuri</td>
                            <td>Berry</td>
                            <td>Chief Marketing Officer (CMO)</td>
                            <td>New York</td>
                            <td>40</td>
                            <td>2009/06/25</td>
                            <td>$675,000</td>
                            <td>6154</td>
                        </tr>
                        <tr>
                            <td>Caesar</td>
                            <td>Vance</td>
                            <td>Pre-Sales Support</td>
                            <td>New York</td>
                            <td>21</td>
                            <td>2011/12/12</td>
                            <td>$106,450</td>
                            <td>8330</td>
                        </tr>
                        <tr>
                            <td>Doris</td>
                            <td>Wilder</td>
                            <td>Sales Assistant</td>
                            <td>Sidney</td>
                            <td>23</td>
                            <td>2010/09/20</td>
                            <td>$85,600</td>
                            <td>3023</td>
                        </tr>
                        <tr>
                            <td>Angelica</td>
                            <td>Ramos</td>
                            <td>Chief Executive Officer (CEO)</td>
                            <td>London</td>
                            <td>47</td>
                            <td>2009/10/09</td>
                            <td>$1,200,000</td>
                            <td>5797</td>
                        </tr>
                        <tr>
                            <td>Gavin</td>
                            <td>Joyce</td>
                            <td>Developer</td>
                            <td>Edinburgh</td>
                            <td>42</td>
                            <td>2010/12/22</td>
                            <td>$92,575</td>
                            <td>8822</td>
                        </tr>
                        <tr>
                            <td>Jennifer</td>
                            <td>Chang</td>
                            <td>Regional Director</td>
                            <td>Singapore</td>
                            <td>28</td>
                            <td>2010/11/14</td>
                            <td>$357,650</td>
                            <td>9239</td>
                        </tr>
                        <tr>
                            <td>Brenden</td>
                            <td>Wagner</td>
                            <td>Software Engineer</td>
                            <td>San Francisco</td>
                            <td>28</td>
                            <td>2011/06/07</td>
                            <td>$206,850</td>
                            <td>1314</td>
                        </tr>
                        <tr>
                            <td>Fiona</td>
                            <td>Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>48</td>
                            <td>2010/03/11</td>
                            <td>$850,000</td>
                            <td>2947</td>
                        </tr>
                        <tr>
                            <td>Shou</td>
                            <td>Itou</td>
                            <td>Regional Marketing</td>
                            <td>Tokyo</td>
                            <td>20</td>
                            <td>2011/08/14</td>
                            <td>$163,000</td>
                            <td>8899</td>
                        </tr>
                        <tr>
                            <td>Michelle</td>
                            <td>House</td>
                            <td>Integration Specialist</td>
                            <td>Sidney</td>
                            <td>37</td>
                            <td>2011/06/02</td>
                            <td>$95,400</td>
                            <td>2769</td>
                        </tr>
                        <tr>
                            <td>Suki</td>
                            <td>Burks</td>
                            <td>Developer</td>
                            <td>London</td>
                            <td>53</td>
                            <td>2009/10/22</td>
                            <td>$114,500</td>
                            <td>6832</td>
                        </tr>
                        <tr>
                            <td>Prescott</td>
                            <td>Bartlett</td>
                            <td>Technical Author</td>
                            <td>London</td>
                            <td>27</td>
                            <td>2011/05/07</td>
                            <td>$145,000</td>
                            <td>3606</td>
                        </tr>
                        <tr>
                            <td>Gavin</td>
                            <td>Cortez</td>
                            <td>Team Leader</td>
                            <td>San Francisco</td>
                            <td>22</td>
                            <td>2008/10/26</td>
                            <td>$235,500</td>
                            <td>2860</td>
                        </tr>
                        <tr>
                            <td>Martena</td>
                            <td>Mccray</td>
                            <td>Post-Sales support</td>
                            <td>Edinburgh</td>
                            <td>46</td>
                            <td>2011/03/09</td>
                            <td>$324,050</td>
                            <td>8240</td>
                        </tr>
                        <tr>
                            <td>Unity</td>
                            <td>Butler</td>
                            <td>Marketing Designer</td>
                            <td>San Francisco</td>
                            <td>47</td>
                            <td>2009/12/09</td>
                            <td>$85,675</td>
                            <td>5384</td>
                        </tr>
                        <tr>
                            <td>Howard</td>
                            <td>Hatfield</td>
                            <td>Office Manager</td>
                            <td>San Francisco</td>
                            <td>51</td>
                            <td>2008/12/16</td>
                            <td>$164,500</td>
                            <td>7031</td>
                        </tr>
                        <tr>
                            <td>Hope</td>
                            <td>Fuentes</td>
                            <td>Secretary</td>
                            <td>San Francisco</td>
                            <td>41</td>
                            <td>2010/02/12</td>
                            <td>$109,850</td>
                            <td>6318</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->
        </div>
    </div>

    <script>

        var ctx = document.getElementById("myChart");
        var myChart = new Chart(ctx, {
            responsive: true,
            type: 'pie',
            data: {
                labels: ["Assemblage1", "Assemblage2", "Graissage", "Test1", "Test2", "Décharge"],
                datasets: [{

                    data: [5, 5, 5, 5, 5, 5],
                    backgroundColor: [
                        '#E9967A',
                        '#99BB96',
                        '#4FD5E7',
                        '#4F66E7',
                        '#E74F74',
                        '#E7E54F'
                    ],
                    borderColor: [
                        'white',
                        'white',
                        'white',
                        'white',
                        'white',
                        'white'
                    ],
                    borderWidth: 10
                }]
            }
        });



        var chart;
        var legend;
        var selected;

        var types = [{
            type: "Assemblage",
            percent: 50,
            color: "#ff9e01",
            subs: [{
                type: "Assemblage1",
                percent: 12
            }, {
                type: "Assemblage2",
                percent: 12
            }, {
                type: "Assemblage2",
                percent: 12
            }, {
                type: "Assemblage3",
                percent: 12
            }]
        }, {
            type: "Test",
            percent: 50,
            color: "#b0de09",
            subs: [{
                type: "Test1",
                percent: 12
            }, {
                type: "Test2",
                percent: 12
            }, {
                type: "Test2",
                percent: 12
            }, {
                type: "Test3",
                percent: 12
            }]
        }];

        function generateChartData() {
            var chartData = [];
            for (var i = 0; i < types.length; i++) {
                if (i == selected) {
                    for (var x = 0; x < types[i].subs.length; x++) {
                        chartData.push({
                            type: types[i].subs[x].type,
                            percent: types[i].subs[x].percent,
                            color: types[i].color,
                            pulled: true
                        });
                    }
                } else {
                    chartData.push({
                        type: types[i].type,
                        percent: types[i].percent,
                        color: types[i].color,
                        id: i
                    });
                }
            }
            return chartData;
        }

        AmCharts.makeChart("chartdiv1", {
            "type": "pie",
            "theme": "light",

            "dataProvider": generateChartData(),
            "labelText": "[[title]]: [[value]]",
            "balloonText": "[[title]]: [[value]]",
            "titleField": "type",
            "valueField": "percent",
            "outlineColor": "#FFFFFF",
            "outlineAlpha": 0.8,
            "outlineThickness": 2,
            "colorField": "color",
            "pulledField": "pulled",
            "titles": [{
                "text": "Click a slice to see the details"
            }],
            "listeners": [{
                "event": "clickSlice",
                "method": function(event) {
                    var chart = event.chart;
                    if (event.dataItem.dataContext.id != undefined) {
                        selected = event.dataItem.dataContext.id;
                    } else {
                        selected = undefined;
                    }
                    chart.dataProvider = generateChartData();
                    chart.validateData();
                }
            }],
            "export": {
                "enabled": true
            }
        });



        AmCharts.makeChart("chartdiv",
            {
                "type": "serial",
                "categoryField": "category",
                "startDuration": 1,
                "theme": "light",
                "categoryAxis": {
                    "gridPosition": "start"
                },
                "chartScrollbar": {
                    "enabled": true
                },
                "trendLines": [],
                "graphs": [
                    {
                        "balloonText": "[[category]] of [[title]]:[[value]]",
                        "fillAlphas": 1,
                        "id": "AmGraph-1",
                        "title": "2016",
                        "type": "column",
                        "valueField": "column-1"
                    },
                    {
                        "balloonText": "[[category]] of [[title]]:[[value]]",
                        "fillAlphas": 1,
                        "id": "AmGraph-2",
                        "title": "2017",
                        "type": "column",
                        "valueField": "column-2"
                    }
                ],
                "guides": [],
                "valueAxes": [
                    {
                        "id": "ValueAxis-1",
                        "title": "Piéce(s)"
                    }
                ],
                "allLabels": [],
                "balloon": {},
                "legend": {
                    "enabled": true,
                    "useGraphSettings": true
                },
                "titles": [
                    {
                        "id": "Title-1",
                        "size": 15,
                        "text": "Suivi production"
                    }
                ],
                "dataProvider": [
                    {
                        "category": "Janvier",
                        "column-1": 100,
                        "column-2": 120
                    },
                    {
                        "category": "Février",
                        "column-1": 105,
                        "column-2": 122
                    },
                    {
                        "category": "Mars",
                        "column-1": 110,
                        "column-2": 110
                    },
                    {
                        "category": "Avril",
                        "column-1": 113,
                        "column-2": 120
                    }
                ]
            }
        );

        $(document).ready(function(){

            $("#p2").hide(0);
            $("#assemblage1").on('click',function(){
                $("#p1").toggle(300);
                $("#p2").toggle(300);
            })
        });
    </script>

{% endblock %}